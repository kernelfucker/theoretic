/* See LICENSE file for license details */
/* theoretic - adventure-based theoretic frame */
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <termios.h>

#define version "0.1"

int gc(void){
	int ch;
	struct termios o;
	struct termios n;
	tcgetattr(STDIN_FILENO, &o);
	n = o;
	n.c_lflag &= ~(ICANON|ECHO);
	tcsetattr(STDIN_FILENO, TCSANOW, &n);
	ch = getchar();
	tcsetattr(STDIN_FILENO, TCSANOW, &o);
	return ch;
}

void cl(){
	system("clear");
}

typedef struct{
	char text[256];
	char last[2][100];
} Text;

void print_ascii(int num){
	cl();
	printf("\n");
	switch(num){
		case -1:
			printf("          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			printf("          @@     @@@@@@                 @@\n");
			printf("          @@           @@@@@@@          @@\n");
			printf("          @@                  @@@@@@@   @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@               @@@@@@   @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@  @@\n");
			printf("          @@                        @@@@@@\n");
			printf("           @@@@@@@                  @@\n");
			printf("                  @@@@@@            @@\n");
			printf("                         @@@@@@@    @@\n");
			printf("                                @@@@@@\n");
			break;
		case 0:
			printf("@@@@@@@@@@@@@@@@                 @@@@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@@@                 +@@@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@                     @@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@                     @@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@                     @@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@@                     +@@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@                       @@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@                       @@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@                       @@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@@          *@+          @@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@+         @@++@         .@@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@          @@@@@          @@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@      @@@-=@@@           @@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@      @@@@@@*:@@         @@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@     @@@###+@#*@@        @@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@@     @@@@#*##*@@         =@@@@@@@@@@@\n");
			printf("@@@@@@@@@@@       @@@@@@@#@@@@        @@@@@@@@@@@\n");
			printf("@@@@@@@@@@@      :@@@@@@@@@@@@        @@@@@@@@@@@\n");
			printf("@@@@@@@@@@@       @@@@@@@@@@@@@       @@@@@@@@@@@\n");
			printf("@@@@@@@@@@@       @@@@@@@@@@@@        @@@@@@@@@@@\n");
			printf("@@@@@@@@@@.          @@  @@@           @@@@@@@@@@\n");
			printf("@@@@@@@@@@           @@@ @@@           @@@@@@@@@@\n");
			printf("@@@@@@@@@@           @@@  @            @@@@@@@@@@\n");
			printf("@@@@@@@@@@           @@  @@            @@@@@@@@@@\n");
			printf("@@@@@@@@@@           @@  @@            @@@@@@@@@@\n");
			printf("@@@@@@@@@@:          @@  @@             @@@@@@@@@\n");
			printf("@@@@@@@@@            @@  @@             @@@@@@@@@\n");
			printf("@@@@@@@@@           @@@  @@             @@@@@@@@@\n");
			printf("@@@@@@@@@           @@@  @@@            @@@@@@@@@\n");
			printf("@@@@@@@@@           @@@  @@@            @@@@@@@@@\n");
			printf("@@@@@@@@            @@@  @@@             @@@@@@@@\n");
			break;
		case 1:
			printf("                    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			printf("                    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			printf("                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			printf("                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			printf("                     @@@@@@@@@-     @@@@@@@@@@@@@\n");
			printf("                     @@@@@@@@@----  @@@@@@@@@@@@@\n");
			printf("                      @@@@@@@@------=  @@@@@@@@@@\n");
			printf("                      @@@@@@@@=------::-  @@@@@@@\n");
			printf("                    :-==+#@@@@+=------:-:--   @@@\n");
			printf("                   #####@@@@@@@+=----::-::----\n");
			printf("                   #+=+++#@@@@@@+=-----:---:----=\n");
			printf("                  ++**#**@@@@@@@@+=-----:--:-----\n");
			printf("                 *-=+**+*#@@@@@@@#+=------------=\n");
			printf("                 #--:=+=*#@@@@@@@@@+=------------\n");
			printf("                +++*######@@@@@@@@@*+=-----------\n");
			printf("               ++#=+***####@@@@@@@@@#+==--------=\n");
			printf("               =++#**###@@@@@@@@@@@@@#+==--------\n");
			printf("              #+****######@@@@@@@@@@@@*++==-----=\n");
			printf("             - +--::--===+#@@@@@@@@@@@@*++==----=\n");
			printf("             #+++:------++*@@@@@@@@@@@@#*+===---=\n");
			printf("            +++=++++*****###@@@@@@@@@@@@#*+======\n");
			printf("            .#++++*********@@@@@@@@@@@@@@#*+=====\n");
			printf("           ######@@@@@@@@@@@@@@@@@@@@@@@@@#*++==+\n");
			printf("           -*==-=+++**+**#*@@@@@@@@@@@@@@@@#*+==+\n");
			printf("          +++++*+*****######@@@@@@@@@@@@@@@@#++++\n");
			printf("          #:-+----+*****+**#@@@@@@@@@@@@@@@@##*++\n");
			printf("                            @@@@@@@@@@@@@@@@@@***\n");
			printf("        =++**#*###%#######%@@@@@@@@@@@@@@@@@@@#**\n");
			printf("        #::.  . ..::+:---=**@@@@@@@@@@@@@@@@@@@##\n");
			printf("                 .          +@@@@@@@@@@@@@@@@@@@@\n");
			printf("            .:==+**++=+----=--@@@@@@@@@@@@@@@@@@@\n");
			printf("      @#-:=-:...:=++=**+**+**@@@@@@@@@@@@@@@@@@@@\n");
			printf("     -@*#=+:-.-:-:==*++**+*#@@@@@@@@@@@@@@@@@@@@@\n");
			printf("                            .@@@@@@@@@@@@@@@@@@@@\n");
			break;
		case 2:
			printf(".............-               .          .  .  .  \n");
			printf(".............+.                        . ... .   \n");
			printf("......-:*--*+*.         .           #....:.....:.\n");
			printf("......:......=       . +@@#@ .       ............\n");
			printf("...:..:.....-=        ..:.:@@ .  .   -.... ......\n");
			printf(".::....::=..-=      . ..:*@          -.........:.\n");
			printf("--:::.*#+:+-.*     -*#=#*@          .:...........\n");
			printf("-=-:..#:.:-..*   .:=.+.@         . ...........:..\n");
			printf(":=--:.+*+:...=   ...:..@            .........=...\n");
			printf(".-==--.=.@@@@@#.@@@@...*            ......:......\n");
			printf(":*#@@@:..@@@@@+ @@@@ ..-#       .   .............\n");
			printf("=*@@@@.*.@@@@@# @@@@@ ..:           .............\n");
			printf("=#@@@@:.:@@@@@# @. @..  .@          .. ..........\n");
			printf(":#@@@@:#=.@@..  .. @.   .*@@       .-............\n");
			printf(":#@@@@:=*.@@..  .  @  .....=#@@@@.   :...... ..::\n");
			printf("-##@@=---.@@@@  @@@@@@@@@@*.+#+=@@.  ........:-:#\n");
			printf("=##@#=#.#.@@..###.@@@@@@@##@:+#@@    :...-....=#-\n");
			printf("-##@#+*.*.@@:#   . +  @@ @@@@#@. ...-:-+::..*+*-:\n");
			printf("=##@#+#.+ @@ @     #  @*@@@#+: ...+.......:#::=++\n");
			printf("=*###=+=: @@ @    .#  @.@-......+#=:-::=++:#+*###\n");
			printf("-+#++:**:.@@ @     . .@:@=....#*@=:.=**+@@+@#@@@@\n");
			printf(":=*++.@.#-@@       . @@@@#.###@##@@#@@@@@@@@@@@@@\n");
			printf("=-+++.@@@@@@ #. .:. @@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			printf("-+*+*.@@@@@@ @     .-@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			printf("***+=.@@@@@@.=       .#@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			break;
		case 3:
			printf(":...:............:...........:...:........:.:....\n");
			printf(".+++++++++++++++++++++++++++++++++++++++++++++++.\n");
			printf(".+++++++++++++++++++++++++++++++++++++++++++++++.\n");
			printf(".++++++++++++++++*######*+++++++++++++++++++++++.\n");
			printf(".++++++++++++++**#......#*++++++++++++++++++++++.\n");
			printf(".+++++++++++++++.-...::..*++++++++++++++++++++++.\n");
			printf(".+++++++++++++++#..@.:@:.#++++++++++++++++++++++.\n");
			printf(".+++++++++++++++#...:::..#++++++++++++++++++++++.\n");
			printf(".+++++++++++++++*#.-==-.#*++++++++++++++++++++++:\n");
			printf(".++++++++++++++++#@-==-@#+++++++++++++++++++++++.\n");
			printf(".+++++++++++++++*#:-==-.@#*+++++++++++++++++++++.\n");
			printf(".+++++++++++++*##.-====-:.*##*++++++++++++++++++.\n");
			printf(".+++++++++++*#@.:-=======-:..*++++++++++++++++++.\n");
			printf(".++++++++++*#..-===========+.#++++++++++++++++++.\n");
			printf(".++++++++++#.-==============.#++++++++++++++++++:\n");
			printf(".++++++++++#.-=+============ #++++++++++++++++++.\n");
			printf(".++++++++++#+:==============.#*+++++++++++++++++.\n");
			printf(".++++++++++**:==============-.#+=+++++++++++++++.\n");
			printf(".+=++++++++#-:==============-.#+++++++++++++++++.\n");
			printf(".++++++++++#:-===============.#+++++++++++++++++.\n");
			printf(".++++++++++#:-===============:=*++++++++++++++++.\n");
			printf(".++++++++++#.================-.#++++++++++++++++.\n");
			printf(".++++++++++#.=================.#++++++++++++++++.\n");
			printf(".++++++++++#.=================.#++++++++++++++++:\n");
			printf(".+++++++++**.=================.**+++++++++++++++.\n");
			printf(".+++++++++*+:=================--#+++++++++++++++.\n");
			printf(".+++++++++*+:=================-.#+++++++++++++++.\n");
			printf(".+++++++++*=:==================.#+++++++++++++++.\n");
			printf(".................................................\n");
			break;
		case 4:
			printf("@@@@@@@@@#@##############*#**#*#*+*+*+**#**######\n");
			printf("@@@@@@@################**####******+**##*=*+****+\n");
			printf("@@@################****++*+*+**#******+*++@+*****\n");
			printf("@@@###########***#*=+++++==-====*###**##***@***++\n");
			printf("@#########****++=* .           ::-=****#***+@====\n");
			printf("#######*#**++ .            .       ..-=****+@##==\n");
			printf("@###*##*+=..                      .    :-=#+@+++=\n");
			printf("######*+... .          .      .          :#@#+++*\n");
			printf("#####=......                         .   @@-+==+*\n");
			printf("##*+*.....       .   .   .  .           @@# -===*\n");
			printf("#+=......     .  . .     @    .    :@@@@ .   .==-\n");
			printf("**... ..         .  .  .  .. . .+  .@@@.     .:-=\n");
			printf("*=  .  :     @           .        @@@@@@  =.   :=\n");
			printf("+...  =..   *       .    . #=  . @@@@.   .     .-\n");
			printf("+... -:.  . @ +.-   .  * .@@  @#@@@.        .   -\n");
			printf(".    @ ..     .* :..     @ = @+@@@-  #@       . -\n");
			printf(".-.@@: .   ..   @@ #       #  @@@=@ -           -\n");
			printf("   #*.      .   :  @   .  .  @@@@.     .     .. -\n");
			printf("=  @:+:.:  ..    .+@ .      @@@@@@    .         -\n");
			printf("+   .@- .. -.   . @@  @@@@@@@@@- @      .    . =-\n");
			printf("**.  .@ .::    :  @@@@@@@@@@@@     #  #     . .+=\n");
			printf("#*.. ..@.@ .   .@@@@@@@  @@   @               =++\n");
			printf("##*  @@@@     @+ @@@@ @@+          . .     .@@++#\n");
			printf("#*+*-  @@  @   *@@@@@@@. =. .@   -    @@@   =****\n");
			printf("##*#*+ @   @@ .@@@@@@   @+:++-=  .    @.  -+++*+*\n");
			printf("*#*#@*##@  *@@@@@@@@@. @@@=.         @- ++*+++*++\n");
			printf("##***#*+@=.  .@@@@@@@  @ @@ =        @@*####+#+++\n");
			printf("#@#####@@***@@@@@@@@ ..   +   :    ++#@=+++*+*+**\n");
			printf("######@@@@@@@@@@@@=-= *      +-+=+*#@@**+****++**\n");
			printf("@@@@@@@@@@@@@@@@@@@#@@#@###*#@@##@@@***@@#+#**+**\n");
			printf("@@@@@@@@@@@@@@@*+**@@@@###@@@@@@@@@@#@@#@@+#*+**#\n");
			printf("@@@@@@@@*#*###########*#@@*@#@@@@@@#***@#@*****#*\n");
			printf("@@@@######@###############@#@@@@#@+@#**@**####*#*\n");
			printf("#####@@@##########@######@####@#@@*+@###@#####*#*\n");
			break;
		case 5:
			printf(":::::::::::::::::::::::::::::::::::::::::::::::::\n");
			printf(":::::::::::::::::::::--::::::::::::::::::::::::::\n");
			printf(":::::::::::::::::::::::::::::::::::::::::::::::::\n");
			printf(":::::::::::::::::::::::::**+:::::::::::::::::::::\n");
			printf("::::::::::::::::::::::::=*##=::::::::::::::::::::\n");
			printf(":::::::::::::::::-#**=-+####*::::::::::::::::::::\n");
			printf(":::::::::::::::-**#############::::::::::::::::::\n");
			printf("::::::::::::::-#-:::#############:::::::::::::::\n");
			printf(":::::::::::::-=:::::#########:-##+::::::::::::::-\n");
			printf("::::::::::::-#=::::-########::::=*::::::::::::--:\n");
			printf("::::::::::::::::::=########*::::::::::::::::::---\n");
			printf("::::::::::::::::::-#########::::::::::::::-------\n");
			printf("::::::::::::::::::+########::::::::::::::::------\n");
			printf("::::::-:-::::::::::#######::::::::::::::-=+######\n");
			printf(":::::::::::::::::::-######-:=*+=-=----==+++*==+++\n");
			printf("::::::::::::-=*#*==#######*::--:-::-:--:--:-:----\n");
			printf("*+=-==--=--==----=#######*:::::::::::-:::--::::::\n");
			printf("----------------=#######*::::--:-:--:::---------:\n");
			printf("--:-----------=#########-::::::-:::::-:----:---::\n");
			printf("----------==*####*:::+#+::::::::--:::--:-:---:---\n");
			printf("-----==--=#####-::--+##=:-----------------------=\n");
			printf("====-===-*#####-=----==------====------=========+\n");
			printf("+++===++=###=*#==+*+=====+===+=+=====-=-====+++++\n");
			printf("++==+=++=##+==+**++***+=+=++===+++=++=+=++*+=*+*+\n");
			printf("**+++***+##*****###**+++++*+++++*++++*+++***+**+*\n");
			break;
		case 6:
			printf("::::::::::::::::::::::::::::::::::::::::::::::::::\n");
			printf("::::::::::::::::::::::::::::::::::::::::::::::::::\n");
			printf("::::::::::::::::::::::::::::::::::::::::::::::::::\n");
			printf(":::::::::::::#@@@@@@@#-:::::::::::::::::::::::::::\n");
			printf("::::::::::*@@@@@@@@@@@@@@#:::::::::::::::::::::::\n");
			printf("::::::::#@@@@@@@@@@@@@@@@@#::::::::::::::::::::::\n");
			printf(":::::-#@@@@@@@@@@@@@@@@@@@@:::::::::::::::::::::::\n");
			printf(":::::*@@@@@@@@@@@@@@@@@@@@@+::::::::::::::::::::::\n");
			printf(":::::#@@##@@@@@@@@@@@@@@@@@@::::::::::::::::::::::\n");
			printf("::::::*=##@@@@@@@@@@@@@@@@@@=:::::::::::::::::::::\n");
			printf(":::::::-##@@@@@@@@@@@@@@@@@@+:::::::::::::::::::::\n");
			printf("::::::::+@@@@@@@@@@@@@@@@@@@@@@:::::::::::::::::::\n");
			printf("::::::::::@@@@@@@@@@@@@@@@@@@@@@#--:::::::::::::::\n");
			printf("::::::::::#@@@@@@@@@@@@@@@@@@@@@@@@@@@@*-:::::::::\n");
			printf("::::::::::*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#-:::::\n");
			printf(":::::::::::::+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=:::\n");
			printf("::::::::::=@=:-#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#::\n");
			printf("::::::::*=::::::@@#-::=@@@@@@@@@@@@@@@@@@@@@@@@@#-\n");
			printf("::::::::::::::::::::::@@@@@@@@@@@@@@@@@@@@@@@@@@@#\n");
			printf(":::::::::::::::::::::-@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			printf("::::::::::::::::::::::#@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			printf("::::::::::::::::::::::*@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
			break;
	}

	printf("\n");
}

void frame(){
	Text texts[7] = {
		{"how does it feel to see a place like a abyss?",
			{"makes happy.", "does not make me happy."}},
		{"you found a large stairs, what will you do?",
			{"go up.", "go up but with the clock."}},
		{"you found a chair at the end of the stairs. what would you like to do?",
			{"sit.", "sit down and look at the clock."}},
		{"you are surprised because you havent seen anyone in years. the man in front of you asks you what year we are living in.",
			{"1998.", "1984."}},
		{"its evening and its getting dark. what would you like to do?",
			{"find the man who left.", "look at the clock before finding the man who left."}},
		{"you saw the man running away at the end of the stairs, but you are too tired to run.",
			{"return to the room.", "return to the room but think about it."}},
		{"you lighted a cigarette and still think, what do you want to do now?",
			{"kill yourself because of nothingness.", "kill yourself by burning yourself."}}
		};

		for(int i = 0; i < 7; i++){
			print_ascii(i);
			printf("%s\n\n", texts[i].text);
			for(int l = 0; l < 2; l++){
				printf("%d - %s\n", l + 1, texts[i].last[l]);
			}

			printf("\n-> ");
			int one;
			char input[100];
			int mode = 0;
			while(!mode){
				if(fgets(input, sizeof(input), stdin) != NULL){
					if(sscanf(input, "%d", &one) == 1 && one >= 1 && one <= 2){
						mode = 1;
					} else {
						printf("-> ");
				}
			}
		}
	}
}

void show_version(){
	printf("theoretic-%s\n", version);
}

void help(){
	printf("usage: theoretic [options]..\n");
	printf("options:\n");
	printf("  -v	show version information\n");
	printf("  -h	display this\n");
}
int main(int argc, char *argv[]){
	if(argc > 1){
		if(strcmp(argv[1], "-h") == 0){
			help();
			return 0;
		} else if(strcmp(argv[1], "-v") == 0){
			show_version();
			return 0;
		} else {
			help();
			return 1;
		}
	}

	char one;
	char input[100];
	print_ascii(-1);
	printf("do you want to enter the frame? [y/n] ");
	if(fgets(input, sizeof(input), stdin) != NULL){
		if(sscanf(input, " %c", &one) != 1){
			return 0;
		}
	}

	if(one != 'y' && one != 'Y'){
		return 0;
	}

	frame();
	cl();

	return 0;
}
